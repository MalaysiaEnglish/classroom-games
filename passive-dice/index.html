<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Passive Builder Dice</title>
  <link rel="stylesheet" href="../style.css">

  <style>
    .dice-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 18px;
      width: 100%;
      max-width: 860px;
      margin: 16px auto;
    }

    .die {
      background: rgba(255,255,255,0.12);
      border-radius: 16px;
      padding: 18px;
      border: 2px solid rgba(255,255,255,0.25);
      text-align: center;
      box-shadow: 0 8px 24px rgba(0,0,0,0.35);
    }

    .die-label {
      font-size: 0.85rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 10px;
      opacity: 0.8;
      font-weight: 700;
    }

    .die-face {
      height: 120px;
      border-radius: 12px;
      background: rgba(255,255,255,0.95);
      color: #1e293b;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      text-align: center;
      padding: 10px;
      overflow: hidden;
      box-shadow: inset 0 4px 12px rgba(0,0,0,0.15);
    }

    .die-face span {
      display: inline-block;
      transition: transform 0.5s ease, opacity 0.5s ease;
    }

    .die-face span.rolling {
      transform: rotateX(360deg) scale(0.5);
      opacity: 0;
    }

    .reveal-box {
      max-width: 860px;
      width: 100%;
      margin: 8px auto 0;
      padding: 16px 20px;
      border-radius: 14px;
      background: rgba(255,255,255,0.12);
      border: 2px dashed rgba(255,255,255,0.4);
      cursor: pointer;
      user-select: none;
      text-align: center;
      transition: background 0.2s ease;
    }

    .reveal-box:hover { background: rgba(255,255,255,0.2); }

    .reveal-label {
      font-size: 0.9rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      opacity: 0.75;
      margin-bottom: 8px;
    }

    .reveal-content {
      display: none;
      font-size: clamp(1.2rem, 3vw, 1.7rem);
      font-weight: 700;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }

    .reveal-content.show { display: flex; }

    .sentence-word {
      padding: 4px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.2);
      border: 2px solid rgba(255,255,255,0.4);
    }

    .sentence-word.core {
      background: rgba(99,179,237,0.35);
      border-color: #63b3ed;
      color: #e8f4ff;
    }

    .sentence-word.verb {
      background: rgba(251,191,36,0.3);
      border-color: #fbbf24;
      color: #fff8e1;
    }

    .roll-btns {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 8px;
    }

    .roll-btns button {
      background: rgba(255,255,255,0.9);
      color: #1e293b;
      min-width: 100px;
    }

    #rollAll {
      background: #50c878 !important;
      color: white !important;
      font-size: 1.1em !important;
    }

    @media (max-width: 640px) {
      .dice-row { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <h1>Passive Builder Dice</h1>

  <div class="controls">
    <button id="rollAll">ðŸŽ² Roll All</button>
    <button id="home">Home</button>
    <button id="fullscreen">Fullscreen</button>
  </div>

  <div class="game-wrapper">

    <div id="currentTurn">Roll the dice â€” then build a passive voice sentence!</div>

    <div class="dice-row">
      <div class="die">
        <div class="die-label">WH Word</div>
        <div class="die-face" id="face-wh"><span>Who</span></div>
      </div>
      <div class="die">
        <div class="die-label">Passive Form</div>
        <div class="die-face" id="face-form"><span>Present Simple</span></div>
      </div>
      <div class="die">
        <div class="die-label">Base Verb</div>
        <div class="die-face" id="face-verb"><span>make</span></div>
      </div>
    </div>

    <div class="roll-btns">
      <button id="rollWh">WH Word</button>
      <button id="rollForm">Form</button>
      <button id="rollVerb">Verb</button>
    </div>

    <div class="reveal-box" id="revealBox">
      <div class="reveal-label">ðŸ‘† Click to reveal the passive question structure</div>
      <div class="reveal-content" id="revealContent">
        <span class="sentence-word core" id="q-wh"></span>
        <span class="sentence-word" id="q-aux"></span>
        <span class="sentence-word verb" id="q-v3"></span>
        <span class="sentence-word core" id="q-object">?</span>
      </div>
    </div>

  </div>

  <script>
    const whWords  = ["Who","What","When","Where","Why","How many","How often","Which"];
    const forms    = ["Present Simple","Past Simple","Present Continuous","Present Perfect"];
    const verbs    = [
      ["make","made"],["build","built"],["repair","repaired"],["invite","invited"],
      ["choose","chosen"],["write","written"],["discover","discovered"],["sell","sold"],
      ["take","taken"],["open","opened"],["close","closed"],["design","designed"],
      ["produce","produced"],["film","filmed"],["paint","painted"],["cook","cooked"],
      ["deliver","delivered"],["publish","published"],["announce","announced"],
      ["award","awarded"],["collect","collected"],["recycle","recycled"],
      ["transport","transported"],["install","installed"],["develop","developed"],
      ["test","tested"],["clean","cleaned"],["organize","organized"],
      ["prepare","prepared"],["send","sent"],["bring","brought"],["teach","taught"],
      ["show","shown"],["call","called"],["name","named"],["arrest","arrested"],
      ["help","helped"],["support","supported"],["protect","protected"],
      ["ban","banned"],["allow","allowed"],["create","created"],["remove","removed"],
      ["update","updated"],["fix","fixed"],["improve","improved"],["change","changed"],
      ["check","checked"],["examine","examined"],["report","reported"],["confirm","confirmed"]
    ];

    const faceWh        = document.getElementById('face-wh');
    const faceForm      = document.getElementById('face-form');
    const faceVerb      = document.getElementById('face-verb');
    const qWh           = document.getElementById('q-wh');
    const qAux          = document.getElementById('q-aux');
    const qV3           = document.getElementById('q-v3');
    const qObj          = document.getElementById('q-object');
    const revealContent = document.getElementById('revealContent');

    document.getElementById('revealBox').addEventListener('click', () =>
      revealContent.classList.toggle('show')
    );

    function random(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

    function animate(face, newText, done) {
      const span = face.querySelector('span');
      span.classList.add('rolling');
      setTimeout(() => {
        span.textContent = newText;
        span.classList.remove('rolling');
        if (done) done();
      }, 350);
    }

    function buildAux(form, wh) {
      const singular = ["Who","What","Which"].includes(wh);
      switch (form) {
        case "Present Simple":     return singular ? "is"        : "are";
        case "Past Simple":        return singular ? "was"       : "were";
        case "Present Continuous": return singular ? "is being"  : "are being";
        case "Present Perfect":    return singular ? "has been"  : "have been";
      }
    }

    function updateReveal() {
      const wh   = faceWh.querySelector('span').textContent.trim();
      const form = faceForm.querySelector('span').textContent.trim();
      const base = faceVerb.querySelector('span').textContent.trim();
      const pair = verbs.find(v => v[0] === base);
      qWh.textContent  = wh;
      qAux.textContent = buildAux(form, wh);
      qV3.textContent  = pair ? pair[1] : base;
      qObj.textContent = '?';
      revealContent.classList.remove('show');
    }

    function rollWh()   { animate(faceWh,   random(whWords),  updateReveal); }
    function rollForm() { animate(faceForm,  random(forms),    updateReveal); }
    function rollVerb() { animate(faceVerb,  random(verbs)[0], updateReveal); }

    function rollAll() {
      revealContent.classList.remove('show');
      animate(faceWh,   random(whWords),   null);
      animate(faceForm, random(forms),     null);
      animate(faceVerb, random(verbs)[0],  () => updateReveal());
    }

    document.getElementById('rollAll').onclick    = rollAll;
    document.getElementById('rollWh').onclick     = rollWh;
    document.getElementById('rollForm').onclick   = rollForm;
    document.getElementById('rollVerb').onclick   = rollVerb;
    document.getElementById('fullscreen').onclick = () => document.documentElement.requestFullscreen?.();
    document.getElementById('home').onclick       = () => window.location.href = '../index.html';

    rollAll();
  </script>
</body>
</html>
