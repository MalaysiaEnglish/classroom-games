<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Content Editor â€” Classroom Games</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .editor-wrapper { max-width: 960px; margin: 0 auto; }
    .tabs { display: flex; gap: 6px; margin-bottom: 16px; }
    .tab-btn { padding: 10px 24px; border-radius: 10px 10px 0 0; border: 1px solid var(--glass-border); border-bottom: none; background: var(--glass); color: var(--text-dim); font-weight: 700; cursor: pointer; font-size: 0.95rem; }
    .tab-btn.active { background: var(--glass-hi); color: var(--text); border-color: var(--accent); color: var(--accent); }
    .tab-panel { display: none; background: var(--glass); border: 1px solid var(--glass-border); border-radius: 0 14px 14px 14px; padding: 20px; }
    .tab-panel.active { display: block; }
    .field-row { display: flex; gap: 10px; flex-wrap: wrap; align-items: flex-end; margin-bottom: 12px; }
    .field-group { display: flex; flex-direction: column; gap: 5px; flex: 1; min-width: 140px; }
    .field-group label { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: var(--accent); }
    .field-group input, .field-group select { padding: 9px 12px; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.08); color: white; font-size: 0.95rem; }
    .field-group input:focus, .field-group select:focus { outline: none; border-color: var(--accent); }
    .toggle-row { display: flex; gap: 8px; }
    .toggle-btn { flex: 1; padding: 9px; border-radius: 8px; border: 1px solid var(--glass-border); background: var(--glass); color: var(--text-dim); cursor: pointer; font-weight: 700; font-size: 0.88rem; text-align: center; transition: all 0.15s; }
    .toggle-btn.sel-correct { background: rgba(34,197,94,0.25); border-color: #22c55e; color: #22c55e; }
    .toggle-btn.sel-wrong   { background: rgba(239,68,68,0.25);  border-color: #ef4444; color: #ef4444; }
    .item-list { display: flex; flex-direction: column; gap: 6px; margin: 14px 0; max-height: 380px; overflow-y: auto; padding-right: 4px; }
    .item-card { display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.06); border: 1px solid var(--glass-border); border-radius: 10px; padding: 10px 14px; }
    .item-card .badge { font-size: 0.72rem; font-weight: 800; padding: 3px 8px; border-radius: 20px; white-space: nowrap; flex-shrink: 0; }
    .badge-correct { background: rgba(34,197,94,0.2); color: #22c55e; border: 1px solid #22c55e; }
    .badge-wrong   { background: rgba(239,68,68,0.2);  color: #ef4444;  border: 1px solid #ef4444; }
    .badge-word    { background: rgba(0,201,167,0.2);  color: var(--accent); border: 1px solid var(--accent); }
    .item-main { flex: 1; font-size: 0.9rem; line-height: 1.4; }
    .item-meta { font-size: 0.75rem; color: var(--text-dim); margin-top: 2px; }
    .btn-del { background: none; border: none; color: var(--text-dim); cursor: pointer; font-size: 1.2rem; padding: 2px 6px; border-radius: 6px; transition: color 0.15s, background 0.15s; }
    .btn-del:hover { color: #ef4444; background: rgba(239,68,68,0.15); }
    .filter-bar { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 10px; align-items: center; }
    .filter-bar select { padding: 6px 10px; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.08); color: white; font-size: 0.85rem; }
    .filter-bar label { font-size: 0.8rem; color: var(--text-dim); font-weight: 600; }
    .count-badge { font-size: 0.8rem; color: var(--text-dim); margin-left: auto; }
    .output-box { background: rgba(0,0,0,0.4); border: 1px solid var(--glass-border); border-radius: 10px; padding: 16px; font-family: 'Courier New', monospace; font-size: 0.78rem; color: #a8d8a8; white-space: pre; overflow-x: auto; max-height: 420px; overflow-y: auto; line-height: 1.5; }
    .action-bar { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 14px; }
    #copyFeedback { font-size: 0.85rem; color: var(--accent); align-self: center; opacity: 0; transition: opacity 0.3s; }
    #copyFeedback.show { opacity: 1; }
    .info-box { background: rgba(0,201,167,0.08); border: 1px solid rgba(0,201,167,0.3); border-radius: 10px; padding: 14px 16px; margin-bottom: 16px; font-size: 0.87rem; line-height: 1.6; color: var(--text-dim); }
    .info-box strong { color: var(--accent); }
    .empty-state { text-align: center; padding: 30px; color: var(--text-dim); font-size: 0.9rem; }
    .section-title { font-size: 0.8rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-dim); margin: 16px 0 8px; border-bottom: 1px solid var(--glass-border); padding-bottom: 6px; }
    #suggestTopicSentences, #suggestTopicWords { list-style: none; display: flex; gap: 6px; flex-wrap: wrap; margin-top: 4px; }
    #suggestTopicSentences li, #suggestTopicWords li { padding: 4px 10px; background: var(--glass-hi); border-radius: 20px; font-size: 0.78rem; cursor: pointer; color: var(--text-dim); transition: all 0.15s; }
    #suggestTopicSentences li:hover, #suggestTopicWords li:hover { background: var(--accent); color: #000; }
      select, select option { background: #1a2a38 !important; color: white !important; }
  </style>
</head>
<body>
  <h1>Content Editor</h1>

  <div class="controls">
    <button id="home" onclick="window.location.href='index.html'">Home</button>
    <button id="fullscreen" onclick="document.documentElement.requestFullscreen?.()">Fullscreen</button>
  </div>

  <div class="game-wrapper">
  <div class="editor-wrapper">

    <div class="info-box">
      Use this editor to manage your <strong>sentences</strong> (Grammar Auction) and <strong>words</strong> (Hangman).<br>
      When finished, click <strong>Export â†’ Download content.js</strong> â€” then replace both <code>content.js</code> <em>and</em> the embedded data block inside <code>content-editor.html</code> (between the two <code>CONTENT DATA</code> comment lines) with the new file contents.
    </div>

    <div class="tabs">
      <button class="tab-btn active" onclick="switchTab('sentences')">ğŸ“ Sentences</button>
      <button class="tab-btn" onclick="switchTab('words')">ğŸ”¤ Words</button>
      <button class="tab-btn" onclick="switchTab('export')">â¬‡ Export</button>
    </div>

    <!-- â”€â”€ SENTENCES TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="tab-sentences" class="tab-panel active">
      <div class="section-title">Add a sentence</div>
      <div class="field-row">
        <div class="field-group" style="flex:3; min-width:220px;">
          <label>Sentence</label>
          <input type="text" id="sText" placeholder="Type the sentence here..." onkeydown="if(event.key==='Enter') addSentence()">
        </div>
      </div>
      <div class="field-row">
        <div class="field-group">
          <label>Grammar Topic</label>
          <input type="text" id="sTopic" placeholder="e.g. Passive Voice" list="topicSuggestions">
          <datalist id="topicSuggestions"></datalist>
        </div>
        <div class="field-group">
          <label>Is it correct English?</label>
          <div class="toggle-row">
            <button class="toggle-btn sel-correct" id="btnCorrect" onclick="setCorrect(true)">âœ“ Correct</button>
            <button class="toggle-btn" id="btnWrong" onclick="setCorrect(false)">âœ— Wrong</button>
          </div>
        </div>
        <div class="field-group" style="flex:0; min-width:auto; justify-content:flex-end;">
          <label>&nbsp;</label>
          <button onclick="addSentence()" style="padding:9px 20px; background:var(--accent); color:#000; border:none; border-radius:8px; font-weight:800; cursor:pointer;">+ Add</button>
        </div>
      </div>

      <div class="section-title">Filter & manage</div>
      <div class="filter-bar">
        <label>Topic:</label>
        <select id="filterSTopic" onchange="renderSentences()"><option value="">All topics</option></select>
        <span class="count-badge" id="sCount"></span>
      </div>

      <div class="item-list" id="sentenceList">
        <div class="empty-state">No sentences yet. Add one above or load from content.js</div>
      </div>
    </div>

    <!-- â”€â”€ WORDS TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="tab-words" class="tab-panel">
      <div class="section-title">Add a word</div>
      <div class="field-row">
        <div class="field-group" style="flex:2;">
          <label>Word or Phrase</label>
          <input type="text" id="wText" placeholder="e.g. METAMORPHOSIS" onkeydown="if(event.key==='Enter') addWord()" style="text-transform:uppercase;">
        </div>
        <div class="field-group">
          <label>Topic</label>
          <input type="text" id="wTopic" placeholder="e.g. Literary Devices" list="wordTopicSuggestions">
          <datalist id="wordTopicSuggestions"></datalist>
        </div>
        <div class="field-group" style="flex:0; min-width:auto; justify-content:flex-end;">
          <label>&nbsp;</label>
          <button onclick="addWord()" style="padding:9px 20px; background:var(--accent); color:#000; border:none; border-radius:8px; font-weight:800; cursor:pointer;">+ Add</button>
        </div>
      </div>

      <div class="section-title">Filter & manage</div>
      <div class="filter-bar">
        <label>Topic:</label>
        <select id="filterWTopic" onchange="renderWords()"><option value="">All topics</option></select>
        <span class="count-badge" id="wCount"></span>
      </div>

      <div class="item-list" id="wordList">
        <div class="empty-state">No words yet. Add one above or load from content.js</div>
      </div>
    </div>

    <!-- â”€â”€ EXPORT TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="tab-export" class="tab-panel">
      <div class="section-title">Generated content.js</div>
      <p style="color:var(--text-dim); font-size:0.87rem; margin-bottom:12px;">
        Copy everything below and replace the contents of your <code style="color:var(--accent)">content.js</code> file.
        If you're using GitHub, open the file there, click the pencil âœï¸ icon, select all, paste, and commit.
      </p>
      <button onclick="generateOutput()" style="padding:10px 22px; background:var(--accent); color:#000; border:none; border-radius:8px; font-weight:800; cursor:pointer; margin-bottom:12px;">ğŸ”„ Generate content.js</button>
      <div class="output-box" id="outputBox">Click "Generate content.js" above to create your file...</div>
      <div class="action-bar">
        <button onclick="copyOutput()" style="padding:10px 22px; background:var(--glass-hi); color:white; border:1px solid var(--glass-border); border-radius:8px; font-weight:700; cursor:pointer;">ğŸ“‹ Copy to Clipboard</button>
        <button onclick="downloadOutput()" style="padding:10px 22px; background:var(--glass-hi); color:white; border:1px solid var(--glass-border); border-radius:8px; font-weight:700; cursor:pointer;">â¬‡ Download content.js</button>
        <span id="copyFeedback">âœ“ Copied!</span>
      </div>
    </div>

  </div>
  </div>

  <!-- â•â•â• CONTENT DATA â€” replace this block with your content.js contents â•â•â• -->
  <script>
/* ================================================================
   CLASSROOM GAMES â€” Custom Content
   Edit this file to add your own sentences and words.
   
   HOW TO USE:
   - sentences: used by Grammar Auction
   - words:     used by Hangman (alongside built-in lists)
   
   topic:  the grammar point or theme  (e.g. "passive voice")
   year:   the year group              (e.g. "Year 10")
   
   In Grammar Auction, filter by topic AND/OR year before starting.
   In Hangman, your custom words appear as extra word lists.
   ================================================================ */

window.CUSTOM_CONTENT = {

  sentences: [

    // â”€â”€ Passive Voice â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { text: "The letter was written by the student.",          correct: true,  topic: "Passive Voice" },
    { text: "The cake was ate by the children.",               correct: false, topic: "Passive Voice" },
    { text: "English is spoken all over the world.",           correct: true,  topic: "Passive Voice" },
    { text: "The window was broke by the ball.",               correct: false, topic: "Passive Voice" },
    { text: "The report will be finished by tomorrow.",        correct: true,  topic: "Passive Voice" },
    { text: "The prize was gave to the winner.",               correct: false, topic: "Passive Voice" },
    { text: "The rules must be followed at all times.",        correct: true,  topic: "Passive Voice" },
    { text: "The homework should been done before class.",     correct: false, topic: "Passive Voice" },
    { text: "The books were returned to the library.",         correct: true,  topic: "Passive Voice" },
    { text: "The car has been drove to the garage.",           correct: false, topic: "Passive Voice" },

    // â”€â”€ Present Tense â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { text: "She goes to school every day.",                   correct: true,  topic: "Present Tense" },
    { text: "He don't like spicy food.",                       correct: false, topic: "Present Tense" },
    { text: "They are playing football right now.",            correct: true,  topic: "Present Tense" },
    { text: "I am agree with you.",                            correct: false, topic: "Present Tense" },
    { text: "She doesn't know the answer.",                    correct: true,  topic: "Present Tense" },
    { text: "We go always to the market on Sunday.",           correct: false, topic: "Present Tense" },
    { text: "He is having a car.",                             correct: false, topic: "Present Tense" },

    // â”€â”€ Past Tense â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { text: "We went to the cinema last night.",               correct: true,  topic: "Past Tense" },
    { text: "She didn't came to class yesterday.",             correct: false, topic: "Past Tense" },
    { text: "They were playing when it started raining.",      correct: true,  topic: "Past Tense" },
    { text: "I catched the bus just in time.",                 correct: false, topic: "Past Tense" },
    { text: "He had already eaten before we arrived.",         correct: true,  topic: "Past Tense" },
    { text: "Did you went to the party?",                      correct: false, topic: "Past Tense" },
    { text: "We didn't saw him at the shop.",                  correct: false, topic: "Past Tense" },

    // â”€â”€ Conditionals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { text: "If it rains, we will stay inside.",               correct: true,  topic: "Conditionals" },
    { text: "If I would have money, I will buy a car.",        correct: false, topic: "Conditionals" },
    { text: "She would travel more if she had more time.",     correct: true,  topic: "Conditionals" },
    { text: "If he studies hard, he would pass.",              correct: false, topic: "Conditionals" },
    { text: "If they had left earlier, they wouldn't have missed the bus.", correct: true,  topic: "Conditionals" },
    { text: "I would have helped if you would have asked.",    correct: false, topic: "Conditionals" },
    { text: "Unless you hurry, we will be late.",              correct: true,  topic: "Conditionals" },

    // â”€â”€ Reported Speech â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { text: "She said that she was tired.",                    correct: true,  topic: "Reported Speech" },
    { text: "He told me he will come tomorrow.",               correct: false, topic: "Reported Speech" },
    { text: "They asked if I had seen the film.",              correct: true,  topic: "Reported Speech" },
    { text: "She said me that she liked the food.",            correct: false, topic: "Reported Speech" },
    { text: "She asked where did I live.",                     correct: false, topic: "Reported Speech" },
    { text: "They said they had already finished.",            correct: true,  topic: "Reported Speech" },
    { text: "He told that he was feeling unwell.",             correct: false, topic: "Reported Speech" },

    // â”€â”€ Articles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { text: "She is a honest person.",                         correct: false, topic: "Articles" },
    { text: "He plays the guitar every evening.",              correct: true,  topic: "Articles" },
    { text: "I had a egg for breakfast.",                      correct: false, topic: "Articles" },
    { text: "The sun rises in the east.",                      correct: true,  topic: "Articles" },
    { text: "She gave him an useful advice.",                  correct: false, topic: "Articles" },

    // â”€â”€ Comparatives â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { text: "She is more taller than her sister.",             correct: false, topic: "Comparatives" },
    { text: "This is the most expensive phone in the shop.",   correct: true,  topic: "Comparatives" },
    { text: "This book is more better than that one.",         correct: false, topic: "Comparatives" },
    { text: "She is the cleverest student I know.",            correct: true,  topic: "Comparatives" },
    { text: "It was the most worst day of my life.",           correct: false, topic: "Comparatives" },

    // â”€â”€ Figurative Language â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { text: "The classroom was a zoo â€” noisy and chaotic.",    correct: true,  topic: "Figurative Language" },
    { text: "Time is a thief that steals our years.",          correct: true,  topic: "Figurative Language" },
    { text: "The wind whispered secrets through the trees.",   correct: true,  topic: "Figurative Language" },
    { text: "The metaphor said the moon is like a silver coin.", correct: false, topic: "Figurative Language" },
    { text: "She simile ran as fast as a cheetah.",            correct: false, topic: "Figurative Language" },
    { text: "Life is a journey with no map.",                  correct: true,  topic: "Figurative Language" },
    { text: "The old house groaned under the weight of its memories.", correct: true, topic: "Figurative Language" },

  ],

  words: [

    // â”€â”€ Literary Devices â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { word: "METAPHOR",        topic: "Literary Devices" },
    { word: "SIMILE",          topic: "Literary Devices" },
    { word: "ALLITERATION",    topic: "Literary Devices" },
    { word: "ONOMATOPOEIA",    topic: "Literary Devices" },
    { word: "PERSONIFICATION", topic: "Literary Devices" },
    { word: "HYPERBOLE",       topic: "Literary Devices" },
    { word: "FORESHADOWING",   topic: "Literary Devices" },
    { word: "JUXTAPOSITION",   topic: "Literary Devices" },
    { word: "SYMBOLISM",       topic: "Literary Devices" },
    { word: "ANAPHORA",        topic: "Literary Devices" },

    // â”€â”€ Grammar Terms â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { word: "CONJUNCTION",     topic: "Grammar Terms" },
    { word: "PREPOSITION",     topic: "Grammar Terms" },
    { word: "ADJECTIVE",       topic: "Grammar Terms" },
    { word: "ADVERB",          topic: "Grammar Terms" },
    { word: "SUBORDINATE",     topic: "Grammar Terms" },
    { word: "PARTICIPLE",      topic: "Grammar Terms" },
    { word: "INFINITIVE",      topic: "Grammar Terms" },
    { word: "PASSIVE VOICE",   topic: "Grammar Terms" },

    // â”€â”€ IGCSE Vocabulary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    { word: "CHARACTERISATION", topic: "IGCSE English" },
    { word: "PROTAGONIST",      topic: "IGCSE English" },
    { word: "ANTAGONIST",       topic: "IGCSE English" },
    { word: "ATMOSPHERE",       topic: "IGCSE English" },
    { word: "INFERENCE",        topic: "IGCSE English" },
    { word: "CONNOTATION",      topic: "IGCSE English" },
    { word: "NARRATIVE",        topic: "IGCSE English" },
    { word: "RHETORIC",         topic: "IGCSE English" },

  ]

};

  </script>
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

  <script>
    // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let sentences = [];
    let words = [];
    let isCorrect = true;

    // â”€â”€ Load from content.js (loaded in <head> before this script) â”€â”€
    document.addEventListener('DOMContentLoaded', () => {
      if (window.CUSTOM_CONTENT) {
        sentences = (window.CUSTOM_CONTENT.sentences || []).map((s,i) => ({...s, _id: i}));
        words     = (window.CUSTOM_CONTENT.words || []).map((w,i) => ({...w, _id: i}));
      }
      refreshAll();
    });

    function refreshAll() {
      renderSentences();
      renderWords();
      updateFilters();
      updateTopicSuggestions();
    }

    // â”€â”€ Tab switching â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function switchTab(name) {
      document.querySelectorAll('.tab-btn').forEach((b,i) => {
        b.classList.toggle('active', ['sentences','words','export'][i] === name);
      });
      document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
      document.getElementById('tab-' + name).classList.add('active');
      if (name === 'export') generateOutput();
    }

    // â”€â”€ Correct toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function setCorrect(val) {
      isCorrect = val;
      document.getElementById('btnCorrect').className = 'toggle-btn' + (val ? ' sel-correct' : '');
      document.getElementById('btnWrong').className   = 'toggle-btn' + (!val ? ' sel-wrong' : '');
    }

    // â”€â”€ Add sentence â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function addSentence() {
      const text  = document.getElementById('sText').value.trim();
      const topic = document.getElementById('sTopic').value.trim() || 'General';
      
      if (!text) { document.getElementById('sText').focus(); return; }
      sentences.push({ text, correct: isCorrect, topic, _id: Date.now() });
      document.getElementById('sText').value = '';
      document.getElementById('sText').focus();
      refreshAll();
    }

    // â”€â”€ Add word â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function addWord() {
      const word  = document.getElementById('wText').value.trim().toUpperCase();
      const topic = document.getElementById('wTopic').value.trim() || 'General';
      
      if (!word) { document.getElementById('wText').focus(); return; }
      words.push({ word, topic, _id: Date.now() });
      document.getElementById('wText').value = '';
      document.getElementById('wText').focus();
      refreshAll();
    }

    // â”€â”€ Delete â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function deleteSentence(id) {
      sentences = sentences.filter(s => s._id !== id);
      refreshAll();
    }
    function deleteWord(id) {
      words = words.filter(w => w._id !== id);
      refreshAll();
    }

    // â”€â”€ Render sentences â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderSentences() {
      const ft = document.getElementById('filterSTopic').value;
      const fy = document.getElementById('filterSYear').value;
      const list = document.getElementById('sentenceList');
      const filtered = sentences.filter(s => !ft || s.topic === ft);
      document.getElementById('sCount').textContent = `${filtered.length} of ${sentences.length} sentence${sentences.length!==1?'s':''}`;
      if (!filtered.length) {
        list.innerHTML = `<div class="empty-state">${sentences.length ? 'No sentences match this filter.' : 'No sentences yet. Add one above.'}</div>`;
        return;
      }
      list.innerHTML = '';
      filtered.forEach(s => {
        const div = document.createElement('div');
        div.className = 'item-card';
        div.innerHTML = `
          <span class="badge ${s.correct ? 'badge-correct' : 'badge-wrong'}">${s.correct ? 'âœ“ Correct' : 'âœ— Wrong'}</span>
          <div class="item-main">
            <div>${s.text}</div>
            <div class="item-meta">${s.topic}</div>
          </div>
          <button class="btn-del" onclick="deleteSentence(${s._id})" title="Delete">Ã—</button>
        `;
        list.appendChild(div);
      });
    }

    // â”€â”€ Render words â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderWords() {
      const ft = document.getElementById('filterWTopic').value;
      const fy = document.getElementById('filterWYear').value;
      const list = document.getElementById('wordList');
      const filtered = words.filter(w => !ft || w.topic === ft);
      document.getElementById('wCount').textContent =
        `${filtered.length} of ${words.length} word${words.length!==1?'s':''}`;
      if (!filtered.length) {
        list.innerHTML = `<div class="empty-state">${words.length ? 'No words match this filter.' : 'No words yet. Add one above.'}</div>`;
        return;
      }
      list.innerHTML = '';
      filtered.forEach(w => {
        const div = document.createElement('div');
        div.className = 'item-card';
        div.innerHTML = `
          <span class="badge badge-word">WORD</span>
          <div class="item-main">
            <div style="font-weight:800;letter-spacing:0.05em;">${w.word}</div>
            <div class="item-meta">${w.topic}</div>
          </div>
          <button class="btn-del" onclick="deleteWord(${w._id})" title="Delete">Ã—</button>
        `;
        list.appendChild(div);
      });
    }

    // â”€â”€ Update filter dropdowns â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function updateFilters() {
      const sTopics = [...new Set(sentences.map(s => s.topic))].sort();
      const wTopics = [...new Set(words.map(w => w.topic))].sort();
      fillSelect('filterSTopic', sTopics);
      fillSelect('filterWTopic', wTopics);
    }

    function fillSelect(id, opts) {
      const sel = document.getElementById(id);
      const cur = sel.value;
      sel.innerHTML = '<option value="">All</option>';
      opts.forEach(o => {
        const opt = document.createElement('option');
        opt.value = o; opt.textContent = o;
        if (o === cur) opt.selected = true;
        sel.appendChild(opt);
      });
    }

    // â”€â”€ Topic autocomplete suggestions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function updateTopicSuggestions() {
      const sTopics = [...new Set(sentences.map(s => s.topic))].sort();
      const wTopics = [...new Set(words.map(w => w.topic))].sort();
      fillDatalist('topicSuggestions', sTopics);
      fillDatalist('wordTopicSuggestions', wTopics);
      // Add any years from existing data into the shared datalist
      const dl = document.getElementById('yearSuggestions');
      if (dl) {
        const existing = [...dl.options].map(o => o.value);
        allYears.forEach(y => {
          if (!existing.includes(y)) {
            const opt = document.createElement('option');
            opt.value = y; dl.appendChild(opt);
          }
        });
      }
    }

    function fillDatalist(id, opts) {
      const dl = document.getElementById(id);
      dl.innerHTML = '';
      opts.forEach(o => {
        const opt = document.createElement('option');
        opt.value = o;
        dl.appendChild(opt);
      });
    }

    // â”€â”€ Generate output â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function generateOutput() {
      const esc = s => s.replace(/\\/g, '\\\\').replace(/"/g, '\\"');

      // Group sentences by topic
      const sTopics = [...new Set(sentences.map(s => s.topic))].sort();
      let sLines = '';
      sTopics.forEach(topic => {
        sLines += `\n    // â”€â”€ ${topic} ${'â”€'.repeat(Math.max(0, 44-topic.length))}\n`;
        sentences.filter(s => s.topic === topic).forEach(s => {
          const text    = esc(s.text).padEnd(56);
          const correct = String(s.correct).padEnd(5);
          sLines += `    { text: "${text}", correct: ${correct}, topic: "${esc(s.topic)}" },\n`;
        });
      });

      // Group words by topic
      const wTopics = [...new Set(words.map(w => w.topic))].sort();
      let wLines = '';
      wTopics.forEach(topic => {
        wLines += `\n    // â”€â”€ ${topic} ${'â”€'.repeat(Math.max(0, 44-topic.length))}\n`;
        words.filter(w => w.topic === topic).forEach(w => {
          const word = esc(w.word).padEnd(22);
          wLines += `    { word: "${word}", topic: "${esc(w.topic)}" },\n`;
        });
      });

      const output = `/* ================================================================
   CLASSROOM GAMES â€” Custom Content
   Generated by Content Editor on ${new Date().toLocaleDateString('en-GB')}

   HOW TO USE:
   - sentences: used by Grammar Auction (filter by topic + year)
   - words:     used by Hangman (alongside built-in word lists)
   ================================================================ */

window.CUSTOM_CONTENT = {

  sentences: [${sLines || '\n    // No sentences added yet\n'}  ],

  words: [${wLines || '\n    // No words added yet\n'}  ]

};
`;
      document.getElementById('outputBox').textContent = output;
    }

    // â”€â”€ Copy / Download â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function copyOutput() {
      const text = document.getElementById('outputBox').textContent;
      navigator.clipboard.writeText(text).then(() => {
        const fb = document.getElementById('copyFeedback');
        fb.classList.add('show');
        setTimeout(() => fb.classList.remove('show'), 2000);
      });
    }

    function downloadOutput() {
      generateOutput();
      const text = document.getElementById('outputBox').textContent;
      const a = document.createElement('a');
      a.href = 'data:text/javascript;charset=utf-8,' + encodeURIComponent(text);
      a.download = 'content.js';
      a.click();
    }
  </script>

</body>
</html>
